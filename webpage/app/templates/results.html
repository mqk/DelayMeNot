<!DOCTYPE html>

{% extends "base.html" %}
{% block content %}
    
    <div class="panel panel-default">
      <div class="panel-heading">
	<h1>Delay Probabilities</h1>
	
	<div style="text-align:right; margin-top:-30px;">
	  <a href="#" id="model_info" class="btn btn-sm btn-info"
	     data-toggle="popover" title="Model Details" data-html="true"
	     data-placement="bottom"
	     data-content="<div style='font-size:75%;'>Number of flights in training data set = 120000 <br> Time to train = 6100 sec <br> Number of flights in test data set = 60000</div>">
	  View model details</a>
	</div>
	<script> $('#model_info').popover() </script>

      </div>
      <div class="panel-body">
	{% if request_info.mode == 0 %}
	<p class="lead">Flights from {{ request_info.origin }} to {{ request_info.destination }} departing on {{ request_info.date_string }}.</p>
	{% elif request_info.mode == 1 %}
	<p class="lead">Flight {{request_info.carrier}}{{request_info.flightnumber}} departing on {{ request_info.date_string }}.</p>
	{% endif %}
      </div>
     

    <table class="table table-hover table-condensed tablesorter" id="results_table">
      <thead>
	<tr>
	  <th>Carrier &nbsp;</th>
	  <th>Flight Number(s)</th>
	  <th>Departure Time</th>
	  <th>Arrival Time</th>
	  <th>Connections</th>
	  <th>Layover</th>
	  <th>Delay Probability</th>
	</tr>
      </thead>

      <tbody class="text-center" id="results_table">

	{% for row in flightstats %}
        <tr id="row{{ loop.index0 }}">
	  <td> {{ row.Carrier[0] }} {% if row.Nlegs > 1 %}<br>{{ row.Carrier[1] }}{% endif %}</td>
	  <td> {{ row.FlightNumber[0] }} {% if row.Nlegs > 1 %}<br>{{ row.FlightNumber[1] }}{% endif %}</td>
	  <td> {{ row.DepartureTime[0] }} {% if row.Nlegs > 1 %}<br>{{ row.DepartureTime[1] }}{% endif %}</td>
	  <td> {{ row.ArrivalTime[0] }} {% if row.Nlegs > 1 %}<br>{{ row.ArrivalTime[1] }}{% endif %}</td>
	  <td> {% if row.ConnectionAirport == '-' %} &mdash; {% else %} {{row.ConnectionAirport}} {% endif %} </td>
	  <td> {% if row.LayoverMinutes == '-' %} &mdash; {% else %} {{row.LayoverMinutes}} min. {% endif %} </td>
	  <td class="delay_probability"> {{row.DelayProbability[0]}} &nbsp; &nbsp; <i class="icon-plane" style="color:{{row.IconColor[0]}};"></i> {% if row.Nlegs > 1 %}<br>{{row.DelayProbability[1]}} &nbsp; &nbsp; <i class="icon-plane" style="color:{{row.IconColor[1]}};">{% endif %} </td>
	</tr>
        {% endfor %}
      </tbody>

    </table>
    </div>

{% endblock %}


